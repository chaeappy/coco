<!--1. 메뉴 선택시 선택창으로 inputMap 전송-->
<!--2. 수량 선택버튼 (1~10+) 10이상 수기입력-->
<!--3. 메뉴 및 수량 실시간 금액합산-->
<!--4. 페이지 뒤로 버튼-->
<!--5. 로그아웃 버튼-->
<!--6. 홈 버튼-->

<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <link th:href="@{/img/logo.png}" />
    <link href="/css/orders/orderForm.css" rel="stylesheet" type="text/css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>
<div class="container">
    <div id="div_left">
    <table>
        <thead>
            <tr>
                <td>음료</td>
                <td>가격</td>
                <td>#</td>
            </tr>
        </thead>
        <tbody>

            <tr th:each="drink : ${menus}">
                <td th:id="${drink.name}" th:text="${drink.name}"></td>
                <td th:text="${drink.price}"></td>
                <td>
                    <input type="hidden" th:name="pk" th:value="${drink.pk}"/>
                    <input type="submit" value="선택" th:onclick="'javascript:addInput(\''+ ${drink.pk} +'\');'"/>
                </td>
            </tr>
        </tbody>
    </table>
    </div>
    <div id="div_right">
    </div>
    <div id="div_right_footer">
        <button type="button" id="paymentBtn" onclick="location.href='/payments'">완료</button>
    </div>
</div> <!-- /container -->

</body>
<script type="text/javascript">
    function addInput(text) {
        var id = text;
        var list = [];
        var total = 0;
        var html = "";
        $.ajax({
            type: "POST",
            url: "/orders/orderForm",
            contentType: "text/plain; charset=utf-8;",
            data: id,
            success: function(send) {
                list = send.inputs;
                total = send.total;

                $.each(list, function(index, value) {
                    html += "<tr>";
                    html += "<td>" + list[index].name + "</td>";
                    html += "<td>" + list[index].howMany + "</td>";
                    html += "</tr>";
                    ++index;
                });
                    html += "<tr>";
                    html += "<td>" + "합계" + "</td>"
                    html += "<td>" + total + "</td>";
                    html += "</tr>";
                    $("#div_right").html(html);

            }
        });
    }

</script>
</html>
